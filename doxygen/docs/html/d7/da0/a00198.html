<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Data Structure and Algorithm: Unity Memory</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Data Structure and Algorithm
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Unity Memory </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This Framework is an optional add-on to Unity. By including <a class="el" href="../../dc/dfe/a00125.html">unity.h</a> and then <a class="el" href="../../d0/dc2/a00104.html">unity_memory.h</a>, you have the added ability to track malloc and free calls. This addon requires that the stdlib functions be overridden by its own defines. These defines will still malloc / realloc / free etc, but will also track the calls in order to ensure that you don't have any memory leaks in your programs.</p>
<p>Note that this is only useful in situations where a unit is in charge of both the allocation and deallocation of memory. When it is not symmetric, unit testing can report a number of false failures. A more advanced runtime tool is required to track complete system memory handling.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Module API</h1>
<h2><a class="anchor" id="autotoc_md8"></a>
&lt;tt&gt;UnityMalloc_StartTest&lt;/tt&gt; and &lt;tt&gt;UnityMalloc_EndTest&lt;/tt&gt;</h2>
<p>These must be called at the beginning and end of each test. For simplicity, they can be added to <code>setUp</code> and <code>tearDown</code> in order to do their job. When using the test runner generator scripts, these will be automatically added to the runner whenever <a class="el" href="../../d0/dc2/a00104.html">unity_memory.h</a> is included.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
&lt;tt&gt;UnityMalloc_MakeMallocFailAfterCount&lt;/tt&gt;</h2>
<p>This can be called from the tests themselves. Passing this function a number will force the reference counter to start keeping track of malloc calls. During that test, if the number of malloc calls exceeds the number given, malloc will immediately start returning <code>NULL</code>. This allows you to test error conditions. Think of it as a simplified mock.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Configuration</h1>
<h2><a class="anchor" id="autotoc_md11"></a>
&lt;tt&gt;UNITY_MALLOC&lt;/tt&gt; and &lt;tt&gt;UNITY_FREE&lt;/tt&gt;</h2>
<p>By default, this module tries to use the real stdlib <code>malloc</code> and <code>free</code> internally. If you would prefer it to use something else, like FreeRTOS's <code>pvPortMalloc</code> and <code>pvPortFree</code>, then you can use these defines to make it so.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
&lt;tt&gt;UNITY_EXCLUDE_STDLIB_MALLOC&lt;/tt&gt;</h2>
<p>If you would like this library to ignore stdlib or other heap engines completely, and manage the memory on its own, then define this. All memory will be handled internally (and at likely lower overhead). Note that this is not a very featureful memory manager, but is sufficient for most testing purposes.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
&lt;tt&gt;UNITY_INTERNAL_HEAP_SIZE_BYTES&lt;/tt&gt;</h2>
<p>When using the built-in memory manager (see <code>UNITY_EXCLUDE_STDLIB_MALLOC</code>) this define allows you to set the heap size this library will use to manage the memory. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
